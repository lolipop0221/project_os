<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulator Sistem Operasi - UAS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-primary">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-cpu"></i> Simulator Sistem Operasi - UAS
            </span>
            <div class="navbar-text text-white">
                UNIBA MADURA - Sistem Operasi 2025/2026
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-3">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="process-tab" data-bs-toggle="tab" data-bs-target="#process" type="button">
                    <i class="bi bi-diagram-3"></i> Manajemen Proses
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="scheduling-tab" data-bs-toggle="tab" data-bs-target="#scheduling" type="button">
                    <i class="bi bi-graph-up"></i> Penjadwalan CPU
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="memory-tab" data-bs-toggle="tab" data-bs-target="#memory" type="button">
                    <i class="bi bi-memory"></i> Manajemen Memori
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="sync-tab" data-bs-toggle="tab" data-bs-target="#sync" type="button">
                    <i class="bi bi-arrow-repeat"></i> Sinkronisasi
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="file-tab" data-bs-toggle="tab" data-bs-target="#file" type="button">
                    <i class="bi bi-folder"></i> Sistem Berkas
                </button>
            </li>
        </ul>

        <div class="tab-content mt-3" id="myTabContent">
            
            <!-- Tab 1: Manajemen Proses -->
            <div class="tab-pane fade show active" id="process" role="tabpanel">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <i class="bi bi-plus-circle"></i> Tambah Proses
                            </div>
                            <div class="card-body">
                                <form id="processForm">
                                    <div class="mb-3">
                                        <label class="form-label">PID</label>
                                        <input type="text" class="form-control" id="pid" placeholder="P1, P2, ..." required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Burst Time</label>
                                        <input type="number" class="form-control" id="burstTime" min="1" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Arrival Time</label>
                                        <input type="number" class="form-control" id="arrivalTime" min="0" value="0">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Priority (1=Highest)</label>
                                        <input type="number" class="form-control" id="priority" min="1" value="1">
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100 mb-2">
                                        <i class="bi bi-plus"></i> Tambah Proses
                                    </button>
                                    <button type="button" class="btn btn-danger w-100" id="clearProcesses">
                                        <i class="bi bi-trash"></i> Hapus Semua
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-table"></i> Tabel Proses (PCB)
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped" id="processTable">
                                        <thead>
                                            <tr>
                                                <th>PID</th>
                                                <th>Burst Time</th>
                                                <th>Arrival Time</th>
                                                <th>Priority</th>
                                                <th>Status</th>
                                                <th>Aksi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="processTableBody">
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-3">
                                    <h6>Status Legend:</h6>
                                    <span class="badge bg-secondary">New</span>
                                    <span class="badge bg-warning">Ready</span>
                                    <span class="badge bg-success">Running</span>
                                    <span class="badge bg-danger">Waiting</span>
                                    <span class="badge bg-dark">Terminated</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Penjadwalan CPU -->
            <div class="tab-pane fade" id="scheduling" role="tabpanel">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <i class="bi bi-gear"></i> Pengaturan Penjadwalan
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Pilih Algoritma</label>
                                    <select class="form-select" id="algorithmSelect">
                                        <option value="fcfs">FCFS (First Come First Serve)</option>
                                        <option value="sjf">SJF (Shortest Job First)</option>
                                        <option value="priority">Priority Scheduling</option>
                                        <option value="rr">Round Robin</option>
                                    </select>
                                </div>
                                <div class="mb-3" id="quantumGroup" style="display: none;">
                                    <label class="form-label">Quantum Time (Round Robin)</label>
                                    <input type="number" class="form-control" id="quantumTime" min="1" value="2">
                                </div>
                                <button class="btn btn-warning w-100 mb-2" id="runScheduling">
                                    <i class="bi bi-play-circle"></i> Jalankan Penjadwalan
                                </button>
                                <button class="btn btn-secondary w-100" id="resetScheduling">
                                    <i class="bi bi-arrow-clockwise"></i> Reset
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <i class="bi bi-bar-chart"></i> Gantt Chart
                            </div>
                            <div class="card-body">
                                <canvas id="ganttChart"></canvas>
                            </div>
                        </div>
                        <div class="card mt-3">
                            <div class="card-header bg-warning text-dark">
                                <i class="bi bi-calculator"></i> Hasil Perhitungan
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>PID</th>
                                                <th>Waiting Time</th>
                                                <th>Turnaround Time</th>
                                                <th>Response Time</th>
                                            </tr>
                                        </thead>
                                        <tbody id="resultTableBody">
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-3">
                                    <h5 id="averageResults"></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Manajemen Memori -->
<div class="tab-pane fade" id="memory" role="tabpanel">
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <i class="bi bi-hdd"></i> Konfigurasi Memori
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Ukuran Memori Total (MB)</label>
                        <input type="number" class="form-control" id="totalMemory" min="64" value="256">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Metode Alokasi</label>
                        <select class="form-select" id="memoryMethod">
                            <option value="first">First Fit</option>
                            <option value="best">Best Fit</option>
                            <option value="worst">Worst Fit</option>
                        </select>
                    </div>
                    <hr>
                    <h6>Alokasi Proses</h6>
                    <div class="mb-3">
                        <label class="form-label">PID Proses</label>
                        <input type="text" class="form-control" id="memoryPid" placeholder="P1">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Ukuran Memori (MB)</label>
                        <input type="number" class="form-control" id="processMemory" min="1" value="32">
                    </div>
                    <button class="btn btn-danger w-100 mb-2" id="allocateMemory">
                        <i class="bi bi-hdd-network"></i> Alokasi Memori
                    </button>
                    <button class="btn btn-secondary w-100" id="deallocateMemory">
                        <i class="bi bi-hdd"></i> Dealokasi Memori
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <i class="bi bi-grid-3x3-gap"></i> Visualisasi Memori
                </div>
                <div class="card-body">
                    <!-- Container untuk visualisasi memori -->
                    <div id="memoryVisualization" class="memory-visual">
                        <!-- Block memori akan di-generate oleh JavaScript -->
                        <div class="text-center text-muted p-5">
                            <i class="bi bi-memory display-4"></i>
                            <p class="mt-3">Memori belum diinisialisasi<br>
                            <small>Klik "Alokasi Memori" untuk mulai</small></p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="bi bi-info-circle"></i> Legenda:</h6>
                                <div class="d-flex align-items-center mb-2">
                                    <div class="memory-block free me-2" style="width: 30px; height: 30px;"></div>
                                    <span>Memori Bebas</span>
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <div class="memory-block allocated me-2" style="width: 30px; height: 30px; background: linear-gradient(135deg, #fb5607 0%, #ff006e 100%);"></div>
                                    <span>Memori Terpakai</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="bi bi-bar-chart"></i> Statistik:</h6>
                                <div class="mb-2">
                                    <small>Total Memori:</small>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar bg-success" id="totalMemoryBar" style="width: 100%"></div>
                                    </div>
                                    <span id="totalMemoryText">256 MB</span>
                                </div>
                                <div class="mb-2">
                                    <small>Digunakan:</small>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar bg-danger" id="usedMemoryBar" style="width: 0%"></div>
                                    </div>
                                    <span id="usedMemoryText">0 MB (0%)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="mt-3">
                        <h5><i class="bi bi-pie-chart"></i> Informasi Fragmentasi</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h6 class="card-title">Fragmentasi Eksternal</h6>
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <div id="fragmentationGauge" style="width: 60px; height: 60px;"></div>
                                            </div>
                                            <div>
                                                <h3 id="fragmentationValue" class="mb-0">0%</h3>
                                                <small id="fragmentationStatus">Tidak Ada</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card mt-3">
                                    <div class="card-body">
                                        <h6 class="card-title">Detail Alokasi</h6>
                                        <div id="allocationDetails">
                                            <p class="mb-1"><i class="bi bi-check-circle text-success"></i> Blok Bebas: <span id="freeBlocks">0</span></p>
                                            <p class="mb-1"><i class="bi bi-x-circle text-danger"></i> Blok Terpakai: <span id="usedBlocks">0</span></p>
                                            <p class="mb-1"><i class="bi bi-diagram-3 text-info"></i> Proses: <span id="processCount">0</span></p>
                                            <p class="mb-1"><i class="bi bi-puzzle text-warning"></i> Fragmentasi: <span id="fragmentationLevel">Rendah</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card mt-3">
                            <div class="card-body">
                                <h6 class="card-title">Proses yang Dialokasikan</h6>
                                <div id="processAllocationList" class="row">
                                    <!-- Daftar proses akan ditampilkan di sini -->
                                    <div class="col-12 text-center text-muted">
                                        <i class="bi bi-inbox"></i>
                                        <p class="mt-2">Belum ada proses yang dialokasikan</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- Tab 4: Sinkronisasi -->
            <div class="tab-pane fade" id="sync" role="tabpanel">
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <i class="bi bi-arrow-left-right"></i> Producer-Consumer Problem dengan Semaphore
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h5>Konfigurasi</h5>
                                <div class="mb-3">
                                    <label class="form-label">Ukuran Buffer</label>
                                    <input type="number" class="form-control" id="bufferSize" min="1" max="10" value="5">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Kecepatan Produksi (ms)</label>
                                    <input type="number" class="form-control" id="produceSpeed" min="100" value="1000">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Kecepatan Konsumsi (ms)</label>
                                    <input type="number" class="form-control" id="consumeSpeed" min="100" value="1500">
                                </div>
                                <button class="btn btn-success w-100 mb-2" id="startSync">
                                    <i class="bi bi-play-fill"></i> Start Simulasi
                                </button>
                                <button class="btn btn-danger w-100 mb-2" id="stopSync">
                                    <i class="bi bi-stop-fill"></i> Stop Simulasi
                                </button>
                                <button class="btn btn-secondary w-100" id="resetSync">
                                    <i class="bi bi-arrow-clockwise"></i> Reset
                                </button>
                            </div>
                            <div class="col-md-8">
                                <h5>Buffer Status</h5>
                                <div id="bufferDisplay" class="buffer-container mb-4"></div>
                                
                                <h5>Semaphore Values</h5>
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>Empty Slots</h6>
                                                <h2 id="emptyCount" class="text-success">5</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>Full Slots</h6>
                                                <h2 id="fullCount" class="text-danger">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>Mutex</h6>
                                                <h2 id="mutexStatus" class="text-primary">1</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <h5>Activity Log</h5>
                                <div id="syncLog" class="border rounded p-3" style="height: 200px; overflow-y: auto; background-color: #f8f9fa;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 5: Sistem Berkas -->
            <div class="tab-pane fade" id="file" role="tabpanel">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <i class="bi bi-folder-plus"></i> Operasi File
                            </div>
                            <div class="card-body">
                                <h6>Create File/Directory</h6>
                                <div class="mb-3">
                                    <label class="form-label">Nama</label>
                                    <input type="text" class="form-control" id="fileName" placeholder="example.txt">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Tipe</label>
                                    <select class="form-select" id="fileType">
                                        <option value="file">File</option>
                                        <option value="directory">Directory</option>
                                    </select>
                                </div>
                                <div class="mb-3" id="fileContentGroup">
                                    <label class="form-label">Konten (untuk file)</label>
                                    <textarea class="form-control" id="fileContent" rows="3"></textarea>
                                </div>
                                <button class="btn btn-primary w-100 mb-2" id="createFileBtn">
                                    <i class="bi bi-file-plus"></i> Create
                                </button>
                                <hr>
                                <h6>Read/Write File</h6>
                                <div class="mb-3">
                                    <label class="form-label">Nama File</label>
                                    <input type="text" class="form-control" id="fileNameRW" placeholder="file.txt">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Konten Baru</label>
                                    <textarea class="form-control" id="fileContentRW" rows="3"></textarea>
                                </div>
                                <button class="btn btn-success w-100 mb-2" id="readFileBtn">
                                    <i class="bi bi-eye"></i> Read
                                </button>
                                <button class="btn btn-warning w-100 mb-2" id="writeFileBtn">
                                    <i class="bi bi-pencil"></i> Write
                                </button>
                                <button class="btn btn-danger w-100" id="deleteFileBtn">
                                    <i class="bi bi-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <i class="bi bi-folder2-open"></i> File System Structure
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <strong>Current Path: <span id="currentPath">/</span></strong>
                                </div>
                                <div id="fileSystemTree" class="file-tree mb-3"></div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Size</th>
                                                <th>Modified</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fileTableBody"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer mt-4 py-3 bg-light border-top">
        <div class="container text-center">
            <span class="text-muted">
                &copy; 2025 UAS Sistem Operasi - UNIBA MADURA
            </span>
            <br>
            <small>Dosen: Mohammad Iqbal Bachtiar, S.T., M.T | Semester Genap 2025/2026</small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
<script src="modules/process-manager.js"></script>
<script src="modules/cpu-scheduler.js"></script>
<script src="modules/memory-manager.js"></script>
<script src="modules/file-system.js"></script>
<script src="script.js"></script>
</html>